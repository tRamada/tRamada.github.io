:root {
  --font-sans: 'Inter', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Fira Sans', 'Droid Sans', 'Helvetica Neue', Arial, sans-serif;
  --font-mono: 'JetBrains Mono', ui-monospace, SFMono-Regular, Menlo, monospace;
  --font-family: var(--font-sans);
  --accent-color: #755bff;
  --accent-color-rgb: 117 91 255;
  --accent-glow: 117 91 255 / 65%;
  --accent-alt: #a29bfe;
  --text-color: #f5f7fa;
  --text-dim: #b5bcc9;
  --navbar-text-color: #c8cfe0;
  --transition-color: #ffffff;
  --surface-0: #0f1115;
  --surface-1: #161a21;
  --surface-2: #1d232c;
  --surface-glass: 16 20 28;
  --border-color: 255 255 255 / 8%;
  --border-color-hover: 255 255 255 / 20%;
  --bg-start: #0d0f13;
  --bg-end: #1e2230;
  --gradient-accent: linear-gradient(90deg,var(--accent-color), var(--accent-alt));
  --radius-xs: 4px;
  --radius-sm: 8px;
  --radius-md: 14px;
  --radius-lg: 22px;
  --shadow-sm: 0 4px 10px -4px rgb(var(--accent-color-rgb) / 35%);
  --shadow-glow: 0 0 0 1px rgb(var(--accent-color-rgb) / 35%), 0 4px 14px -4px rgb(var(--accent-color-rgb) / 55%), 0 0 22px -6px rgb(var(--accent-color-rgb) / 75%);
  --ease-spring: cubic-bezier(.16,.84,.44,1);
  --ease-squish: cubic-bezier(.55,.02,.4,.9);
}

/* Global box-sizing to avoid padding causing overflow on narrow screens */
*, *::before, *::after { box-sizing: border-box; }

/* Light theme token overrides */
html.light {
  --accent-color: #4b5dff;
  --accent-color-rgb: 75 93 255;
  --accent-alt: #7da5ff;
  --text-color: #1f2430;
  --text-dim: #5a6475;
  --navbar-text-color: #3d4654;
  --surface-0: #ffffff;
  --surface-1: #f5f7fb;
  --surface-2: #e9eef5;
  --surface-glass: 255 255 255;
  --border-color: 0 0 0 / 10%;
  --border-color-hover: 0 0 0 / 22%;
  --bg-start: #f5f8ff;
  --bg-end: #dce5f5;
  --gradient-accent: linear-gradient(90deg,var(--accent-color), var(--accent-alt));
  --shadow-sm: 0 4px 10px -4px rgb(75 93 255 / 25%);
  --shadow-glow: 0 0 0 1px rgb(75 93 255 / 25%), 0 4px 14px -4px rgb(75 93 255 / 40%), 0 0 22px -6px rgb(75 93 255 / 55%);
}

/* Auto respect system preference on first load (JS will set class) */
@media (prefers-color-scheme: light) {
  :root:not(.dark):not(.light) body { background: radial-gradient(circle at 15% 20%, var(--bg-start), var(--bg-end)); }
}

html.theme-transition *, html.theme-transition *::before, html.theme-transition *::after {
  transition: background-color .5s ease, color .5s ease, border-color .5s ease, box-shadow .6s ease, fill .5s ease, stroke .5s ease;
}

html {
  scroll-behavior: smooth;
  scroll-padding-top: var(--nav-h, 0px);
}

body {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
  font-family: var(--font-family);
  background: radial-gradient(circle at 15% 20%, var(--bg-start), var(--bg-end));
  color: var(--text-color);
  min-height: 100vh;
  -webkit-font-smoothing: antialiased;
  animation: bg-pan 18s linear infinite;
  background-size: 200% 200%;
  scroll-snap-type: y proximity;
  overscroll-behavior-y: none;
  overflow-x: hidden;
}

body.is-animating-scroll {
  scroll-snap-type: none; /* prevent snap conflicts during JS-driven scroll */
}

::selection {
  background: var(--accent-color);
  color: #fff;
}

/* Full-screen snapping sections */
section {
  min-height: calc(100vh - var(--nav-h, 0px));
  width: 100%;
  max-width: 1100px; /* prevents horizontal overflow with padding */
  padding: clamp(2.5rem, 6vh, 5rem) 2rem;
  margin-inline: auto;
  position: relative;
  display: flex;
  flex-direction: column;
  justify-content: center;
  scroll-snap-align: start;
  opacity: 0;
  transform: translateY(40px) scale(.98);
  transition: opacity .85s var(--ease-spring), transform .95s var(--ease-spring), filter 1s ease;
  will-change: opacity, transform;
}

@media (max-width: 640px){
  section { padding: clamp(2rem, 5vh, 3.5rem) 1.4rem; }
}

@media (max-width: 420px){
  section { padding: clamp(1.75rem, 5vh, 3rem) 1.15rem; }
}

@media (max-width: 360px){
  section { padding: 1.5rem 1rem 2.3rem; }
}

section.active {
  opacity: 1;
  transform: translateY(0) scale(1);
  z-index: 1;
}

section.jump-focus {
  outline: 2px solid rgba(var(--accent-color-rgb) / .9);
  outline-offset: 6px;
  transition: outline-color .8s ease;
  animation: pulse-focus 1.1s ease;
}

@keyframes pulse-focus {
  0% { outline-color: rgba(var(--accent-color-rgb) / 0); }
  25% { outline-color: rgba(var(--accent-color-rgb) / .9); }
  100% { outline-color: rgba(var(--accent-color-rgb) / 0); }
}

section.fading-out {
  opacity: 0;
  transform: translateY(-20px) scale(.98);
  z-index: 0;
  transition: opacity .6s ease, transform .65s cubic-bezier(.55,.02,.4,.9);
}

.hero h1 span.accent {
  background: var(--gradient-accent);
  -webkit-background-clip: text;
  background-clip: text;
  color: transparent;
  position: relative;
}

.hero h1 span.accent::after {
  content: '';
  position: absolute;
  inset: 0;
  background: radial-gradient(circle at 30% 60%, rgba(var(--accent-color-rgb) /.4), transparent 70%);
  mix-blend-mode: plus-lighter;
  opacity: 0;
  animation: accent-pulse 6s linear infinite;
  pointer-events: none;
}

@keyframes accent-pulse {
  0%,60%,100% { opacity: .12; }
  30% { opacity: .4; }
}

/* Fancy list animation baseline */
ul { list-style: none; padding: 0; }
ul.animated-list > * { opacity: 0; transform: translateY(18px); animation: listIn .75s var(--ease-spring) forwards; }
ul.animated-list > *:nth-child(1){ animation-delay: .05s; }
ul.animated-list > *:nth-child(2){ animation-delay: .12s; }
ul.animated-list > *:nth-child(3){ animation-delay: .19s; }
ul.animated-list > *:nth-child(4){ animation-delay: .26s; }
ul.animated-list > *:nth-child(5){ animation-delay: .33s; }

@keyframes listIn { to { opacity:1; transform: translateY(0); } }

/* (Legacy reveal removed in favor of active section transitions) */

@keyframes bg-pan {
  0% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
}

@media (prefers-reduced-motion: reduce) {
  body { animation: none; }
  [data-reveal] { opacity: 1; transform: none; animation: none !important; }
}

/* Scroll progress bar */
body::before {
  content: '';
  position: fixed;
  top: 0; left: 0; right: 0;
  height: 3px;
  background: linear-gradient(90deg,var(--accent-color),var(--accent-alt));
  transform-origin: 0 50%;
  transform: scaleX(var(--scroll-progress, 0));
  z-index: 100;
  transition: transform .15s linear;
}